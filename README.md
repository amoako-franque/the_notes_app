# Notes Application - Node.js CRUD with MongoDB

A full-stack web application for managing notes with user authentication via Google OAuth. Built with Node.js, Express, MongoDB, and EJS templating.

## üöÄ Features

- **User Authentication**: Google OAuth 2.0 integration
- **CRUD Operations**: Create, Read, Update, and Delete notes
- **Session Management**: Secure session storage with MongoDB
- **Responsive UI**: Modern and clean user interface
- **Docker Support**: Fully containerized application

## üìã Prerequisites

Before you begin, ensure you have the following installed:

- **Node.js** (v18 or higher) - [Download](https://nodejs.org/)
- **MongoDB** (v7.0 or higher) - [Download](https://www.mongodb.com/try/download/community) OR Docker
- **npm** (comes with Node.js)
- **Docker & Docker Compose** (optional, for containerized setup) - [Download](https://www.docker.com/get-started)
- **Google Cloud Console Account** (for OAuth credentials) - [Get Started](https://console.cloud.google.com/)

## üõ†Ô∏è Setup Instructions

### Option 1: Local Development Setup (Without Docker)

#### Step 1: Clone the Repository

```bash
git clone <repository-url>
cd Notes-NodeJs-CRUD-MongoDB-main
```

#### Step 2: Install Dependencies

```bash
npm install
```

#### Step 3: Set Up MongoDB Locally

**Option A: Using MongoDB Community Edition**

1. Install MongoDB locally following the [official guide](https://www.mongodb.com/docs/manual/installation/)
2. Start MongoDB service:
   ```bash
   # macOS (using Homebrew)
   brew services start mongodb-community

   # Linux
   sudo systemctl start mongod

   # Windows
   net start MongoDB
   ```

**Option B: Using MongoDB via Docker (Recommended for Quick Setup)**

```bash
docker run -d \
  --name mongodb \
  -p 27017:27017 \
  -e MONGO_INITDB_ROOT_USERNAME=admin \
  -e MONGO_INITDB_ROOT_PASSWORD=password123 \
  -e MONGO_INITDB_DATABASE=notes \
  mongo:7.0
```

#### Step 4: Configure Environment Variables

1. Copy the example environment file:
   ```bash
   cp .env.example .env
   ```

2. Edit `.env` file with your configuration:

   ```env
   # MongoDB Connection (Local)
   MONGODB_URI=mongodb://admin:password123@localhost:27017/notes?authSource=admin

   # OR for MongoDB without authentication:
   # MONGODB_URI=mongodb://localhost:27017/notes

   # Google OAuth Credentials (Optional - app will work without them)
   GOOGLE_CLIENT_ID=your_google_client_id_here
   GOOGLE_CLIENT_SECRET=your_google_client_secret_here
   GOOGLE_CALLBACK_URL=http://localhost:59080/google/callback

   # Server Port (Optional)
   PORT=59080
   ```

#### Step 5: Set Up Google OAuth (Optional)

1. Go to [Google Cloud Console](https://console.cloud.google.com/)
2. Create a new project or select an existing one
3. Enable Google+ API
4. Go to **Credentials** ‚Üí **Create Credentials** ‚Üí **OAuth 2.0 Client ID**
5. Configure the consent screen if prompted
6. Set application type to **Web application**
7. Add authorized redirect URI: `http://localhost:59080/google/callback`
8. Copy the **Client ID** and **Client Secret** to your `.env` file

#### Step 6: Start the Application

```bash
# Development mode (with auto-reload)
npm run dev

# Production mode
npm start
```

The application will be available at `http://localhost:59080`

---

### Option 2: Docker Setup (Recommended for Production)

#### Step 1: Clone and Navigate

```bash
git clone <repository-url>
cd Notes-NodeJs-CRUD-MongoDB-main
```

#### Step 2: Configure Environment Variables

1. Copy the example environment file:
   ```bash
   cp .env.example .env
   ```

2. Edit `.env` file:

   ```env
   # MongoDB Configuration (used by docker-compose)
   MONGO_ROOT_USERNAME=admin
   MONGO_ROOT_PASSWORD=password123
   MONGO_DATABASE=notes
   MONGO_PORT=27017

   # Application Configuration
   APP_PORT=59080
   NODE_ENV=production

   # Google OAuth (Optional)
   GOOGLE_CLIENT_ID=your_google_client_id_here
   GOOGLE_CLIENT_SECRET=your_google_client_secret_here
   GOOGLE_CALLBACK_URL=http://localhost:59080/google/callback
   ```

   **Note**: The `MONGODB_URI` is automatically generated by docker-compose using the MongoDB service name.

#### Step 3: Build and Run with Docker Compose

**Production Mode:**
```bash
# Build and start all services
docker-compose up -d

# View logs
docker-compose logs -f

# Stop all services
docker-compose down

# Stop and remove volumes (clears database)
docker-compose down -v
```

**Development Mode (with hot-reload):**
```bash
# Start development environment
docker-compose -f docker-compose.dev.yml up

# Start in background
docker-compose -f docker-compose.dev.yml up -d

# View logs
docker-compose -f docker-compose.dev.yml logs -f

# Stop development services
docker-compose -f docker-compose.dev.yml down
```

The application will be available at `http://localhost:59080`

#### Docker Commands Reference

**Production:**
```bash
# Start services in background
docker-compose up -d

# Start services with logs
docker-compose up

# Rebuild containers after code changes
docker-compose up -d --build

# View logs
docker-compose logs -f app
docker-compose logs -f mongodb

# Stop services
docker-compose stop

# Stop and remove containers
docker-compose down

# Access MongoDB shell
docker-compose exec mongodb mongosh -u admin -p password123 --authenticationDatabase admin

# Access application container shell
docker-compose exec app sh
```

**Development:**
```bash
# Start development environment
docker-compose -f docker-compose.dev.yml up

# Rebuild development containers
docker-compose -f docker-compose.dev.yml up -d --build

# View development logs
docker-compose -f docker-compose.dev.yml logs -f

# Access development MongoDB shell
docker-compose -f docker-compose.dev.yml exec mongodb mongosh -u admin -p password123 --authenticationDatabase admin
```

---

## üìÅ Project Structure

```
Notes-NodeJs-CRUD-MongoDB-main/
‚îú‚îÄ‚îÄ app.js                 # Main application entry point
‚îú‚îÄ‚îÄ package.json           # Dependencies and scripts
‚îú‚îÄ‚îÄ Dockerfile             # Docker image configuration
‚îú‚îÄ‚îÄ docker-compose.yml     # Docker Compose configuration
‚îú‚îÄ‚îÄ .env.example           # Environment variables template
‚îú‚îÄ‚îÄ .dockerignore          # Docker ignore file
‚îú‚îÄ‚îÄ mongo-init.js          # MongoDB initialization script
‚îú‚îÄ‚îÄ public/                # Static assets (CSS, images)
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îî‚îÄ‚îÄ img/
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ db.js          # Database connection configuration
‚îÇ   ‚îú‚îÄ‚îÄ controllers/       # Route controllers
‚îÇ   ‚îú‚îÄ‚îÄ middleware/        # Custom middleware
‚îÇ   ‚îú‚îÄ‚îÄ models/            # Mongoose models
‚îÇ   ‚îî‚îÄ‚îÄ routes/            # Express routes
‚îî‚îÄ‚îÄ views/                 # EJS templates
    ‚îú‚îÄ‚îÄ layouts/
    ‚îú‚îÄ‚îÄ partials/
    ‚îî‚îÄ‚îÄ dashboard/
```

## üîß Configuration

### MongoDB Connection Strings

**Local MongoDB (No Authentication):**
```
mongodb://localhost:27017/notes
```

**Local MongoDB (With Authentication):**
```
mongodb://username:password@localhost:27017/notes?authSource=admin
```

**Docker MongoDB (From docker-compose):**
```
mongodb://admin:password123@mongodb:27017/notes?authSource=admin
```

### Environment Variables

| Variable | Description | Required | Default |
|----------|-------------|----------|---------|
| `MONGODB_URI` | MongoDB connection string | Yes | - |
| `GOOGLE_CLIENT_ID` | Google OAuth Client ID | No | - |
| `GOOGLE_CLIENT_SECRET` | Google OAuth Client Secret | No | - |
| `GOOGLE_CALLBACK_URL` | OAuth callback URL | No | `http://localhost:59080/google/callback` |
| `PORT` | Server port | No | `59080` |
| `NODE_ENV` | Environment mode | No | `development` |

## üêõ Troubleshooting

### MongoDB Connection Issues

**Problem**: Cannot connect to MongoDB

**Solutions**:
1. Verify MongoDB is running:
   ```bash
   # Check MongoDB status
   mongosh --eval "db.adminCommand('ping')"
   ```
2. Check connection string in `.env` file
3. Verify MongoDB port (default: 27017) is not blocked
4. For Docker: Ensure containers are running: `docker-compose ps`

### Google OAuth Not Working

**Problem**: Google authentication fails

**Solutions**:
1. Verify credentials in `.env` file
2. Check callback URL matches Google Console configuration
3. Ensure Google+ API is enabled in Google Cloud Console
4. Verify redirect URI includes correct port

### Port Already in Use

**Problem**: Port 59080 is already in use

**Solutions**:
1. Change `PORT` in `.env` file
2. Kill process using port 59080:
   ```bash
   # macOS/Linux
   lsof -ti:59080 | xargs kill -9

   # Windows
   netstat -ano | findstr :59080
   taskkill /PID <PID> /F
   ```

### Docker Issues

**Problem**: Docker containers won't start

**Solutions**:
1. Check Docker is running: `docker ps`
2. View detailed logs: `docker-compose logs`
3. Rebuild containers: `docker-compose up -d --build`
4. Check disk space: `docker system df`

## üß™ Testing

Currently, no automated tests are configured. To test manually:

1. Start the application
2. Navigate to `http://localhost:59080`
3. Test Google OAuth login (if configured)
4. Create, read, update, and delete notes

## üìù API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/` | Home page |
| GET | `/auth/google` | Initiate Google OAuth |
| GET | `/google/callback` | OAuth callback |
| GET | `/dashboard` | User dashboard |
| GET | `/logout` | Logout user |

## üîí Security Considerations

- **Session Secret**: Change the default session secret in `app.js` for production
- **Environment Variables**: Never commit `.env` file to version control
- **MongoDB Authentication**: Always use authentication in production
- **HTTPS**: Use HTTPS in production for OAuth callbacks
- **CORS**: Configure CORS if using API endpoints

## üö¢ Deployment

### Production Checklist

- [ ] Update session secret
- [ ] Set `NODE_ENV=production`
- [ ] Use strong MongoDB credentials
- [ ] Configure HTTPS
- [ ] Update OAuth callback URLs for production domain
- [ ] Set up proper logging
- [ ] Configure backup strategy for MongoDB
- [ ] Set up monitoring and alerts

### Docker Production Deployment

```bash
# Build production image
docker build -t notes-app:latest .

# Run with production environment
docker run -d \
  --name notes-app \
  -p 59080:59080 \
  --env-file .env.production \
  --restart unless-stopped \
  notes-app:latest
```

## üìö Technologies Used

- **Backend**: Node.js, Express.js
- **Database**: MongoDB, Mongoose
- **Authentication**: Passport.js, Google OAuth 2.0
- **Templating**: EJS (Embedded JavaScript)
- **Session Management**: express-session, connect-mongo
- **Containerization**: Docker, Docker Compose

## ü§ù Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## üìÑ License

This project is licensed under the ISC License.

## üë®‚Äçüíª Author

Built with ‚ù§Ô∏è by the development team

## üìû Support

For issues and questions:
- Open an issue on GitHub
- Check the troubleshooting section above
- Review MongoDB and Node.js documentation

---

**Happy Coding! üéâ**
